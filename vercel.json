{
  "git": {
    "deploymentEnabled": {
      "main": true
    }
  },
  "installCommand": "pnpm install",
  "buildCommand": "pnpm run vercel-build",
  "outputDirectory": ".next",
  "framework": "nextjs",
  "regions": ["iad1"],
  
  "routes": [
    { "src": "/api/health", "dest": "/api/health" },
    { "handle": "filesystem" },
    { "src": "/_next/static/(.*)", "dest": "/_next/static/$1", "headers": { "cache-control": "public, max-age=31536000, immutable" } },
    { "src": "/_next/data/(.*)", "dest": "/_next/data/$1", "headers": { "cache-control": "public, max-age=0, must-revalidate" } },
    { "src": "/_next/(.*)bucket(.*)", "dest": "/_next/$1bucket$2" },
    { "src": "/public/(.*)", "dest": "/$1" },
    { "src": "/api/(.*)", "dest": "/api/$1" },
    { "src": "/(.*)", "dest": "/" }
  ],
  
  "headers": [
    {
      "source": "/(.*)",
      "headers": [
        { "key": "X-Content-Type-Options", "value": "nosniff" },
        { "key": "X-Frame-Options", "value": "DENY" },
        { "key": "X-XSS-Protection", "value": "1; mode=block" }
      ]
    }
  ],
  
  "env": {
    "NODE_ENV": "production",
    "NEXT_PUBLIC_VERCEL_ENV": "production",
    "NEXT_RUNTIME": "nodejs",
    "NEXT_SHARP_PATH": "/tmp/node_modules/sharp"
  },
  
  "build": {
    "env": {
      "NEXT_PUBLIC_VERCEL_DEPLOYMENT": "true"
    }
  }
}