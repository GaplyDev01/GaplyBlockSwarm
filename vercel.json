{
  "git": {
    "deploymentEnabled": {
      "main": true
    }
  },
  "installCommand": "pnpm install",
  "buildCommand": "pnpm run vercel-build",
  "outputDirectory": ".next",
  "framework": "nextjs",
  "regions": ["iad1"],
  
  "routes": [
    { 
      "src": "/api/health", 
      "dest": "/api/health" 
    },
    { 
      "handle": "filesystem" 
    },
    { 
      "src": "/_next/static/(.*)", 
      "dest": "/_next/static/$1", 
      "headers": { 
        "cache-control": "public, max-age=31536000, immutable",
        "X-Content-Type-Options": "nosniff",
        "X-Frame-Options": "DENY",
        "X-XSS-Protection": "1; mode=block"
      } 
    },
    { 
      "src": "/_next/data/(.*)", 
      "dest": "/_next/data/$1", 
      "headers": { 
        "cache-control": "public, max-age=0, must-revalidate",
        "X-Content-Type-Options": "nosniff",
        "X-Frame-Options": "DENY",
        "X-XSS-Protection": "1; mode=block"
      } 
    },
    { 
      "src": "/_next/(.*)bucket(.*)", 
      "dest": "/_next/$1bucket$2",
      "headers": {
        "X-Content-Type-Options": "nosniff",
        "X-Frame-Options": "DENY",
        "X-XSS-Protection": "1; mode=block"
      }
    },
    { 
      "src": "/public/(.*)", 
      "dest": "/$1",
      "headers": {
        "X-Content-Type-Options": "nosniff",
        "X-Frame-Options": "DENY",
        "X-XSS-Protection": "1; mode=block"
      }
    },
    { 
      "src": "/api/(.*)", 
      "dest": "/api/$1",
      "headers": {
        "X-Content-Type-Options": "nosniff",
        "X-Frame-Options": "DENY",
        "X-XSS-Protection": "1; mode=block"
      }
    },
    { 
      "src": "/(.*)", 
      "dest": "/",
      "headers": {
        "X-Content-Type-Options": "nosniff",
        "X-Frame-Options": "DENY",
        "X-XSS-Protection": "1; mode=block"
      }
    }
  ],
  
  "env": {
    "NODE_ENV": "production",
    "NEXT_PUBLIC_VERCEL_ENV": "production",
    "NEXT_SHARP_PATH": "/tmp/node_modules/sharp"
  },
  
  "build": {
    "env": {
      "NEXT_PUBLIC_VERCEL_DEPLOYMENT": "true"
    }
  }
}